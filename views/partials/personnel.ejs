<div class="col-sm-3">
    <div class="well">
      <!-- <div style="padding-right: 5%; float: right;">
      </div> -->
      <div class="card">
        <div class="card-body" style="overflow-y: scroll;">
          <h1 class="card-title">Personnel - <%= personnel.length %>
          <button class="btn border-secondary-subtle" data-toggle="modal" data-target="#exampleModal">ADD +</button>
        
        
          <!-- Modal -->
        <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body">
                ...
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary">Save changes</button>
              </div>
            </div>
          </div>
        </div>

</h1>
          <hr><h5 class="card-title">Assigned</h5>
          <div class="card-body bg-secondary-subtle" id="cont">

      
          <% personnel.forEach(function(person) { if (person.projects) {%>
            <button draggable="True" type="button" style="width: 100%; text-align: left; position: relative; z-index: 1000" 
              class="btn bg-light border-secondary-subtle" 
              data-toggle="popover"  
              title="Popover title" 
              data-placement="left"  
              data-content="And here's some amazing content. It's very engaging. Right?">
              
              <strong><%= person.firstName+' '+person.lastName %></strong>
                  <% 
                    // count how many projects each person has and determine their color
                    let total = 0;
                      person.projects.forEach(function(project) { 
                        total+= project.weight;
                      })

                    let color;
                    if (total < 1) {
                      color='primary';
                    } else if (total < 2) {
                      color='success';
                    }
                    else if (total < 3) {
                      color='warning';
                    } else {
                      color='danger';
                    } 
                  %>

                  <span class="badge bg-<%=color%>" style="float: right;">
                    <%= total %>
                  </span></button>
            <% }}); %>
          </div>
            <hr><h5 class="card-title">Unassigned</h5>
            <div class="card-body bg-secondary-subtle">
            <% personnel.forEach(function(person) { if (person.projects) {} else{ %>
              <button draggable="True" style="width: 100%; text-align: left;"
                class="btn bg-light border-secondary-subtle"><strong>
                  <%= person.firstName+' '+person.lastName %></strong>
                    <span class="badge bg-primary" style="float: right;">
                      0
                    </span></button>
              <% }}); %>
            </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
// var popoverTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="popover"]'))
// var popoverList = popoverTriggerList.map(function (popoverTriggerEl) {
//   return new bootstrap.Popover(popoverTriggerEl)
// })
  $(document).ready(function(){
      $('[data-toggle="popover"]').popover({
        container: 'body'
      });  
  });

  $('#myModal').on('shown.bs.modal', function () {
  $('#myInput').trigger('focus')
})
  </script>