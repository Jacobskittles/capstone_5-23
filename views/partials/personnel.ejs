<div class="col-sm-3">
    <div class="well">
      <!-- <div style="padding-right: 5%; float: right;">
      </div> -->
      <div class="card">
        <div class="card-body" style="overflow-y: scroll;">
          <h1 class="card-title">Personnel - <%= personnel.length %>
          <button class="btn border-secondary-subtle">ADD +</button></h1>
          <hr><h5 class="card-title">Assigned</h5>
          <div class="card-body bg-secondary-subtle" id="cont">

      
          <% personnel.forEach(function(person) { if (person.projects) {%>
            <button draggable="True" style="width: 100%; text-align: left; position: relative; z-index: 1000" 
              class="btn bg-light border-secondary-subtle" 
              id="popbtn"
              type="button"
              data-bs-toggle="popover"  
              title="Popover title" 
              data-bs-placement="top"  
              
              data-bs-content="And here's some amazing content. It's very engaging. Right?">
              
                <strong>
                <%= person.firstName+' '+person.lastName %></strong>
                  <% 
                    // count how many projects each person has and determine their color
                    let total = 0;
                      person.projects.forEach(function(project) { 
                        total+= project.weight;
                      })

                    let color;
                    if (total < 1) {
                      color='primary';
                    } else if (total < 2) {
                      color='success';
                    }
                    else if (total < 3) {
                      color='warning';
                    } else {
                      color='danger';
                    } 
                  %>

                  <span class="badge bg-<%=color%>" style="float: right;">
                    <%= total %>
                  </span></button>
            <% }}); %>
          </div>
            <hr><h5 class="card-title">Unassigned</h5>
            <div class="card-body bg-secondary-subtle">
            <% personnel.forEach(function(person) { if (person.projects) {} else{ %>
              <button draggable="True" style="width: 100%; text-align: left;"
                class="btn bg-light border-secondary-subtle"><strong>
                  <%= person.firstName+' '+person.lastName %></strong>
                    <span class="badge bg-primary" style="float: right;">
                      0
                    </span></button>
              <% }}); %>
            </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  $(document).ready(function(){
      $('[data-bs-toggle="popover"]').popover({
        container: 'body'
      });  
  });
  </script>